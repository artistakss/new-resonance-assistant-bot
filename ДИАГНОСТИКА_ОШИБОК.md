# üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd ~/resonance-assistant
source .venv/bin/activate
python diagnose.py
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –í–µ—Ä—Å–∏—é Python
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ .env —Ñ–∞–π–ª–∞
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚ùå –í—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –®–∞–≥ 2: –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
sudo journalctl -u resonance-bot.service -n 50 --no-pager

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u resonance-bot.service -f
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞

```bash
sudo systemctl status resonance-bot.service
```

---

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "ModuleNotFoundError"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd ~/resonance-assistant
source .venv/bin/activate
pip install -r requirements.txt
```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "Environment variable BOT_TOKEN is required"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ñ–∞–π–ª `.env` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
   ```bash
   ls -la ~/resonance-assistant/.env
   ```

2. –ü—Ä–æ–≤–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–π —Ç–æ–∫–µ–Ω—ã!):
   ```bash
   grep -E "^BOT_TOKEN|^ADMIN_ID|^CHANNEL_ID" ~/resonance-assistant/.env
   ```

3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã (–±–µ–∑ –∫–∞–≤—ã—á–µ–∫ –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö):
   ```bash
   BOT_TOKEN=123456:ABC-DEF...
   ADMIN_ID=123456789
   ```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied" –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd ~/resonance-assistant
mkdir -p storage
chmod 755 storage
chmod 644 .env
```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –Ω–æ —Å—Ä–∞–∑—É –ø–∞–¥–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫—É:
   ```bash
   cd ~/resonance-assistant
   source .venv/bin/activate
   python bot.py
   ```

2. –ï—Å–ª–∏ –≤–∏–¥–∏—à—å –æ—à–∏–±–∫—É - —Å–∫–æ–ø–∏—Ä—É–π –µ—ë –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –æ—Ç–ø—Ä–∞–≤—å

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –≤ systemd unit

**–ü—Ä–æ–≤–µ—Ä—å —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞:**
```bash
sudo cat /etc/systemd/system/resonance-bot.service
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```ini
[Service]
Type=simple
User=root  # –∏–ª–∏ ubuntu, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
WorkingDirectory=/root/resonance-assistant  # –∏–ª–∏ /home/ubuntu/resonance-assistant
Environment="PATH=/root/resonance-assistant/.venv/bin"
ExecStart=/root/resonance-assistant/.venv/bin/python bot.py
```

**–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```bash
sudo systemctl daemon-reload
sudo systemctl restart resonance-bot.service
```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Python –≤–µ—Ä—Å–∏—è –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç

**–ü—Ä–æ–≤–µ—Ä—å –≤–µ—Ä—Å–∏—é:**
```bash
python3 --version
python3.11 --version  # –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

**–ï—Å–ª–∏ Python 3.8 (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è):**
- –£—Å—Ç–∞–Ω–æ–≤–∏ Python 3.11:
  ```bash
  sudo apt update
  sudo apt install -y python3.11 python3.11-venv python3.11-dev
  ```
- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
  ```bash
  cd ~/resonance-assistant
  rm -rf .venv
  python3.11 -m venv .venv
  source .venv/bin/activate
  pip install --upgrade pip
  pip install -r requirements.txt
  ```

---

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏

1. ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ .env —Ñ–∞–π–ª–∞** - —Ç–µ–ø–µ—Ä—å –∏—â–µ—Ç —Ñ–∞–π–ª –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
2. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å –ø—É—Ç—è–º–∏ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö** - –ø—É—Ç–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
3. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** - `diagnose.py` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. –ó–∞–ø—É—Å—Ç–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `python diagnose.py`
2. –°–∫–æ–ø–∏—Ä—É–π **–ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥** –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –°–∫–æ–ø–∏—Ä—É–π **–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤**: `sudo journalctl -u resonance-bot.service -n 100`
4. –û—Ç–ø—Ä–∞–≤—å –æ–±–∞ –≤—ã–≤–æ–¥–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

